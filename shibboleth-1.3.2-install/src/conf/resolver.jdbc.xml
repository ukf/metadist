<AttributeResolver xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:mace:shibboleth:resolver:1.0" xsi:schemaLocation="urn:mace:shibboleth:resolver:1.0 shibboleth-resolver-1.0.xsd">
	
	<!-- Simple example JDBC Connector setup with a query based on principal name -->
	
	<SimpleAttributeDefinition id="urn:mace:dir:attribute-def:eduPersonEntitlement" sourceName="entitlement">
		<DataConnectorDependency requires="db1"/>
	</SimpleAttributeDefinition>

	<JDBCDataConnector id="db1" 
		dbURL="jdbc:postgresql://test.example.edu/test?user=postgres&amp;password=test" 
		dbDriver="org.postgresql.Driver"
		maxActive="10"
		maxIdle="5">
		<Query>select entitlement from foo where name = ?</Query>
	</JDBCDataConnector>




	<!-- A more complicated example, where a query is constructed based on dependencies
		on another Data Connector and an Attribute Definition -->
		
	<SimpleAttributeDefinition id="urn:mace:dir:attribute-def:eduPersonAffiliation">
		<DataConnectorDependency requires="echo"/>
	</SimpleAttributeDefinition>

	<SimpleAttributeDefinition id="urn:x-mace:shibboleth:date">
		<DataConnectorDependency requires="db2"/>
	</SimpleAttributeDefinition>
	
	<JDBCDataConnector id="db2" 
		dbURL="jdbc:postgresql://test.example.edu/test?user=postgres&amp;password=test" 
		dbDriver="org.postgresql.Driver"
		maxActive="10" 
		maxIdle="5">
		<DataConnectorDependency requires="echo"/>
		<AttributeDependency requires="urn:mace:dir:attribute-def:eduPersonEntitlement"/>
		<Query>select date from foo where principalName = ? and entitlement = ?</Query>
		<StatementCreator class="edu.internet2.middleware.shibboleth.aa.attrresolv.provider.DependencyStatementCreator">
			<Parameter type="String" attributeName="eduPersonPrincipalName" connectorId="echo" nullMissing="false"></Parameter>
			<Parameter type="String" attributeName="urn:mace:dir:attribute-def:eduPersonEntitlement" nullMissing="false"></Parameter>
		</StatementCreator>
	</JDBCDataConnector>
	
	<CustomDataConnector id="echo" class="edu.internet2.middleware.shibboleth.aa.attrresolv.provider.SampleConnector"/>
	
</AttributeResolver>
